# 230307

- [[ìœ ë‹ˆí‹° ê°•ì¢Œ] ë‹¨ê°„ë¡ íŒŒë¥¼ ìœ ë‹ˆí‹°ë¡œ êµ¬í˜„í•˜ê¸° Part 14 - 1 ë§µ ì´ë™ (ì”¬ ë³€ê²½)](https://youtu.be/DV14FGGvUTU?list=PLUZ5gNInsv_NG_UKZoua8goQbtseAo8Ow)



## 1. ë§µ ì´ë™ (ì‹  ë³€ê²½)

### 1. ìƒí˜¸ì‘ìš© íƒ€ì… ë¶„ë¦¬

- ğŸ“‘ **`InteractionType.cs` ìƒì„±**

- ë³€ìˆ˜

  ```c#
  public bool isDoor;
  public bool isObject;
  
  [SerializeField] string interactionName;
  ```

  

- `GetName()` í•¨ìˆ˜ ìƒì„±

  ```c#
  public string GetName()
  {
      return interactionName;
  }
  ```



- `Door` ì˜¤ë¸Œì íŠ¸ì— `Interaction Type` ì»´í¬ë„ŒíŠ¸ ì¶”ê°€ í›„, ë‹¤ìŒê³¼ ê°™ì´ ì„¤ì •í•œë‹¤.

  ![image-20230307203930093](Assets/230307.assets/image-20230307203930093.png)



### 2. ìƒí˜¸ì‘ìš© ë¶„ê¸° ì²˜ë¦¬

- ğŸ“‘ **`InteractionDoor.cs` ìƒì„±**

- ë³€ìˆ˜

  ```c#
  [SerializeField] string sceneName;      // ì¥ì†Œë¥¼ ì´ë™í•  ë•Œ, ì–´ëŠ ì‹ ìœ¼ë¡œ ë„˜ì–´ê°€ê²Œ í• ì§€
  [SerializeField] string locationName;   // ex) ì¥ì†Œê°€ ë³µë„ì´ê³  ë¬¸ì´ ì—¬ëŸ¬ ê°œ ìˆì„ ë•Œ, ê°ê°ì˜ ë¬¸ì— ë‹¤ë¥¸ ì´ë¦„ì´ ìˆë‹¤.
  ```

  - `sceneName`: ì¥ì†Œë¥¼ ì´ë™í•  ë•Œ, ì–´ëŠ ì‹ ìœ¼ë¡œ ë„˜ì–´ê°€ê²Œ í• ì§€ ê²°ì •í•œë‹¤.
  - `locationName`: ë§Œì•½ ì¥ì†Œê°€ ë³µë„ì´ê³  ë¬¸ì´ ì—¬ëŸ¬ ê°œ ìˆì„ ë•Œ, ê°ê°ì˜ ë¬¸ì— ë‹¤ë¥¸ ì´ë¦„ì´ ìˆë‹¤.



- `GetSceneName()` í•¨ìˆ˜ ìƒì„±

  ```c#
  public string GetSceneName()
  {
      return sceneName;
  }
  ```



- `GetLocationName()` í•¨ìˆ˜ ìƒì„±

  ```c#
  public string GetLocationName()
  {
      return locationName;
  }
  ```



- `Door` ì˜¤ë¸Œì íŠ¸ì— `Interaction Door` ì»´í¬ë„ŒíŠ¸ ì¶”ê°€ í›„, ë‹¤ìŒê³¼ ê°™ì´ ì„¤ì •í•œë‹¤.

  ![image-20230307205817475](Assets/230307.assets/image-20230307205817475.png)

  - `Scene Name`: ì•„ì§ ë¬¸ì„ í´ë¦­í–ˆì„ ë•Œ ì „í™˜ë  ì‹ ì„ ë§Œë“¤ì§„ ì•Šì•˜ì§€ë§Œ, ë³µë„ë¡œ ê°„ë‹¤ê³  ê°€ì •
  - `Location Name`: í˜„ì¬ ì‹ ì„ Room01ì´ë¼ê³  í•œë‹¤ë©´, ë¬¸ì„ í´ë¦­í–ˆì„ ë•Œ ë³µë„ë¡œ ê°„ë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.



- ğŸ“‘ **`InteractionController.cs` ìˆ˜ì •**

- `Interact()` í•¨ìˆ˜ ìˆ˜ì •

  ```c#
  // ìƒí˜¸ì‘ìš© ê°€ëŠ¥ ì˜¤ë¸Œì íŠ¸ë¥¼ ì¢Œí´ë¦­í–ˆì„ ë•Œ, ëŒ€ì‚¬ì°½ì„ ë³´ì—¬ì¤Œ.
  // ë¬¸ì„ ì¢Œí´ë¦­í–ˆì„ ë•ŒëŠ” ë§µì„ ì´ë™í•¨.
  void Interact()
  {
      clickedInteractive = true;
  
      InteractionEvent t_event = hit.transform.GetComponent<InteractionEvent>();
  
      // ì˜¤ë¸Œì íŠ¸ í´ë¦­
      if (hit.transform.GetComponent<InteractionType>().isObject)
      {
          CallDialogue(t_event);  // ëŒ€í™” ì´ë²¤íŠ¸ í˜¸ì¶œ
      }
  
      // ë¬¸ í´ë¦­
      else
      {
          CallTransfer();
      }
  }
  ```

  - í´ë¦­í•œ ë¬¼ì²´ì˜ `InteractionType`ì„ ê°€ì ¸ì™€ì„œ, ì˜¤ë¸Œì íŠ¸ì¸ì§€ ë¬¸ì¸ì§€ë¥¼ êµ¬ë¶„í•œë‹¤.
    - ì˜¤ë¸Œì íŠ¸ì´ë©´ `CallDialogue()` í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œë‹¤. (ê¸°ì¡´ ì½”ë“œ)
    - ë¬¸ì´ë©´ `CallTransfer()` í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œë‹¤.



- `CallDialogue()` í•¨ìˆ˜ ìƒì„±

  ```c#
  // ëŒ€í™” ì´ë²¤íŠ¸ í˜¸ì¶œ
  void CallDialogue(InteractionEvent p_event)
  {
      if (p_event.GetAppearType() == AppearType.Change)
      {
          dm.SetAppearObjects(p_event.GetAppearTargets(), p_event.GetDisppearTargets());
      }
  
      dm.ShowDialogue(p_event.GetDialogue()); // ìƒí˜¸ì‘ìš©í•œ ì˜¤ë¸Œì íŠ¸ì˜ ëŒ€ì‚¬ ì´ë²¤íŠ¸ë¥¼ êº¼ë‚´ì˜¨ë‹¤.
  }
  ```

  

- `CallTransfer()` í•¨ìˆ˜ ìƒì„±

  ```c#
  // ë§µ(ì‹ ) ì´ë™ í•¨ìˆ˜ í˜¸ì¶œ
  void CallTransfer()
  {
      string t_sceneName = hit.transform.GetComponent<InteractionDoor>().GetSceneName();
      string t_locationName = hit.transform.GetComponent<InteractionDoor>().GetLocationName();
  
      Debug.Log(t_sceneName + t_locationName);
  }
  ```

  - ì•„ì§ ì´ë™í•  ì‹ ì„ ë§Œë“¤ì§€ ì•Šì•˜ìœ¼ë¯€ë¡œ, ë¶„ê¸° ì²˜ë¦¬ê°€ ì˜ ë˜ëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ `t_sceneName`ê³¼ `t_locationName`ì„ í•œ ë²ˆ ì¶œë ¥í•´ ë³¸ë‹¤.



- ìƒˆë¡œìš´ ë§µ(ì‹ ) ìƒì„±

  ![image-20230307213156153](Assets/230307.assets/image-20230307213156153.png)

  - ì‹  ì´ë¦„ì„ `Corridor`ë¡œ ì§€ì–´ì£¼ì—ˆë‹¤.



### 3. ë§µ ì´ë™

- ğŸ“‘ **`TransferManager.cs` ìƒì„±**

- `Transfer()` ì½”ë£¨í‹´ ìƒì„±

  ```c#
  public IEnumerator Transfer(string p_sceneName, string p_locationName)
  {
      yield return null;  // í•œ í”„ë ˆì„ ëŒ€ê¸°
  
      SceneManager.LoadScene(p_sceneName);
  }
  ```



- ğŸ“‘ **`InteractionController.cs` ìˆ˜ì •**

- `CallTransfer()` í•¨ìˆ˜ ìˆ˜ì •

  ```c#
  void CallTransfer()
  {
      string t_sceneName = hit.transform.GetComponent<InteractionDoor>().GetSceneName();
      string t_locationName = hit.transform.GetComponent<InteractionDoor>().GetLocationName();
  
      StartCoroutine(FindObjectOfType<TransferManager>().Transfer(t_sceneName, t_locationName));
  }
  ```

  - `TransferManager.cs`ì—ì„œ ìƒì„±í–ˆë˜ `Transfer()` ì½”ë£¨í‹´ì„ í˜¸ì¶œí•œë‹¤.



- ì´ì „ ì‹ (ë‚˜ëŠ” `TestGameScene`ìœ¼ë¡œ ëŒì•„ì™€ì„œ, `Manager` ì˜¤ë¸Œì íŠ¸ì— `Transfer Manager` ì»´í¬ë„ŒíŠ¸ë¥¼ ì¶”ê°€í•œë‹¤.



- ìœ ë‹ˆí‹° ìµœìƒë‹¨ ë©”ë‰´ì˜ **File â†’ Build Settings** í´ë¦­

  ![image-20230307220058099](Assets/230307.assets/image-20230307220058099.png)



- `Corridor` ì‹ ì„ ë‹¤ìŒê³¼ ê°™ì´ ì¶”ê°€í•´ì¤€ë‹¤.

  ![image-20230307220519150](Assets/230307.assets/image-20230307220519150.png)



- ì‹¤í–‰ ê²°ê³¼

  ![2023-03-07_22-08-58](Assets/230307.assets/2023-03-07_22-08-58.gif)

  - ë§µ ì´ë™ ì‹œ ë¶€ìì—°ìŠ¤ëŸ¬ìš´ ë¬¸ì œê°€ ì¡´ì¬í•œë‹¤. í˜ì´ë“œì¸/ì•„ì›ƒ íš¨ê³¼ê°€ í•„ìš”í•  ê²ƒ ê°™ë‹¤. (ë‹¤ìŒì— êµ¬í˜„)
  - ë¬¸ì— ì»¤ì„œë¥¼ ì˜¬ë¦¬ë©´ ì´ë™ ì»¤ì„œ ì´ë¯¸ì§€ê°€ ì•„ë‹Œ, ì¡°ì‚¬ ì»¤ì„œ ì´ë¯¸ì§€ê°€ ë³´ì´ëŠ” ë¬¸ì œê°€ ë°œìƒ



## 2. ê¸°ì¡´ ì½”ë“œ ìˆ˜ì •

- ìš°ì„  ì½”ë“œë¥¼ ìˆ˜ì •í•˜ê¸° ì „, ìƒí˜¸ì‘ìš© ê°€ëŠ¥í•œ ì˜¤ë¸Œì íŠ¸ ë“¤ì—ë„ `Interact Type`ì„ ì¶”ê°€í•´ ì£¼ì–´ì•¼ í•œë‹¤. (`Crowbar`, `Bear`, `Key` ì˜¤ë¸Œì íŠ¸ì— ì¶”ê°€)

  ![image-20230307222600188](Assets/230307.assets/image-20230307222600188.png)



- ğŸ“‘ **`InteractionController.cs` ìˆ˜ì •**

- `LeftClick()` í•¨ìˆ˜ ìˆ˜ì •

  ```c#
  // ìƒí˜¸ì‘ìš© ê°€ëŠ¥ ì˜¤ë¸Œì íŠ¸ë¥¼ ì¢Œí´ë¦­í–ˆì„ ë•Œ, Interact í•¨ìˆ˜ í˜¸ì¶œ
  void LeftClick()
  {
      // clickedInteractive ê°’ì´ falseì¼ ë•Œë§Œ ì˜¤ë¸Œì íŠ¸ë¥¼ í´ë¦­ ê°€ëŠ¥
      if (!clickedInteractive)
      {
          if (Input.GetMouseButtonDown(0))
          {
              if (isInteractive || isMovable)
              {
                  Interact();
              }
          }
      }
  }
  ```

  - ê·¸ëƒ¥ ì˜¤ë¸Œì íŠ¸ë¥¼ í´ë¦­í–ˆë“ , ë¬¸ì„ í´ë¦­í–ˆë“ , ë‘ ê°€ì§€ ê²½ìš° ëª¨ë‘ì— `Interact()` í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ì•¼ í•œë‹¤.
  - ë”°ë¼ì„œ ifë¬¸ì„ `if (isInteractive || isMovable)` ë¡œ ì‚´ì§ ìˆ˜ì •í•´ ì£¼ì—ˆë‹¤.
  - ê·¸ëŸ¬ë©´ ëŒ€í™” ì´ë²¤íŠ¸ë„ ì˜ ë‚˜ì˜¤ê³ , ë§µ ì´ë™ë„ ì˜ ëœë‹¤.



## 3. ë‹¤ìŒì— í•  ì¼

- ~~ì´ë²¤íŠ¸ ì—°ì†ìœ¼ë¡œ ë°œìƒì‹œí‚¤ê¸°~~
- ~~ë§µ ì´ë™ êµ¬í˜„í•´ë³´ê¸°~~
- ìë™ ì´ë²¤íŠ¸ ì‹œ UI ë…¸ì¶œë˜ëŠ” í˜„ìƒ ìˆ˜ì •
- ì‚¬ìš´ë“œ ê´€ë ¨ ê¸°ëŠ¥ë“¤ êµ¬í˜„í•´ë³´ê¸° (íš¨ê³¼ìŒ, ë³´ì´ìŠ¤, ë°°ê²½ ìŒì•…)
- ì˜¤ë¸Œì íŠ¸ í´ë¡œì¦ˆì—…(í•˜ë©´ì„œ í™”ë©´ ì´ë™)í•˜ê¸°??
- ë§ˆìš°ìŠ¤ ì»¤ì„œì— ì• ë‹ˆë©”ì´ì…˜? ë„£ê¸°
- ë§ˆìš°ìŠ¤ ì»¤ì„œì— ì´í™íŠ¸ ë„£ê¸°
- ì˜¤ë¸Œì íŠ¸ íšë“ ë° í™œìš©
- í•œ ë²ˆë§Œ ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸ êµ¬í˜„
- **ì˜¤ë¸Œì íŠ¸ í´ë¦­ ì‹œ, ê°•ì¡°í•˜ëŠ” ì´í™íŠ¸ ë„£ê¸° & ì½”ë£¨í‹´ìœ¼ë¡œ ëŒ€ì‚¬ì°½ ë„ìš°ëŠ” ì‹œê°„ ì¡°ì •í•˜ê¸°**



## 4. ì°¸ê³ í•  ë§Œí•œ ìë£Œë“¤

- [[Unity] ì—‘ì…€ ëŒ€í™” ì •ë³´ë“¤ì„ ëŒ€í™” ì´ë¦„ìœ¼ë¡œ ë¬¶ì–´ì„œ ê°€ì ¸ì˜¤ê¸°](https://velog.io/@gkswh4860/Unity-%EC%97%91%EC%85%80-%EB%8C%80%ED%99%94-%EB%82%B4%EC%9A%A9%EC%9D%84-%EB%8C%80%ED%99%94-%EC%9D%B4%EB%A6%84%EC%9C%BC%EB%A1%9C-%EB%AC%B6%EC%96%B4%EC%84%9C-%EA%B0%80%EC%A0%B8%EC%98%A4%EA%B8%B0)
- [ìœ ë‹ˆí‹°ë¡œ ë¯¸ì—°ì‹œ ë§Œë“¤ê¸° ì¡¸ì—…í”„ë¡œì íŠ¸](https://www.youtube.com/watch?v=eWT0TsknaiU&t=7s)
- [Unity 2Dë¡œ ë¹„ì£¼ì–¼ë…¸ë²¨ ë§Œë“¤ê¸°(Flowchart)](https://m.blog.naver.com/liear1997/221292510685)

- **ì˜¤ë¸Œì íŠ¸ ìƒí˜¸ì‘ìš© ì´í™íŠ¸ ë° ì´ë²¤íŠ¸**
  - [[ìœ ë‹ˆí‹° ê°•ì¢Œ] ë‹¨ê°„ë¡ íŒŒë¥¼ ìœ ë‹ˆí‹°ë¡œ êµ¬í˜„í•˜ê¸° Part 3 - 3 ìƒí˜¸ì‘ìš© ì´ë²¤íŠ¸](https://youtu.be/ftBw_KhI694?list=PLUZ5gNInsv_NG_UKZoua8goQbtseAo8Ow)
  - [[ìœ ë‹ˆí‹° ê°•ì¢Œ] ë‹¨ê°„ë¡ íŒŒë¥¼ ìœ ë‹ˆí‹°ë¡œ êµ¬í˜„í•˜ê¸° Part 3 - 2 ìƒí˜¸ì‘ìš© ì´í™íŠ¸](https://youtu.be/DBFOqJICh3E?list=PLUZ5gNInsv_NG_UKZoua8goQbtseAo8Ow)
- [[ìœ ë‹ˆí‹° ê°•ì¢Œ] ë‹¨ê°„ë¡ íŒŒë¥¼ ìœ ë‹ˆí‹°ë¡œ êµ¬í˜„í•˜ê¸° Part 3 - 4 ë””í…Œì¼ (Tooltip + ì¶”ê°€ ì—°ì¶œ)](https://www.youtube.com/watch?v=-89RsNEgE7w&list=PLUZ5gNInsv_NG_UKZoua8goQbtseAo8Ow&index=11)
- [[ìœ ë‹ˆí‹° ê°•ì¢Œ] ë‹¨ê°„ë¡ íŒŒë¥¼ ìœ ë‹ˆí‹°ë¡œ êµ¬í˜„í•˜ê¸° Part 8 ì‚¬ìš´ë“œ ë§¤ë‹ˆì € + ê°•ì¡° ì—°ì¶œ](https://youtu.be/04RYW3i35jI?list=PLUZ5gNInsv_NG_UKZoua8goQbtseAo8Ow)



## 5. í›„ê¸°

- ì˜ìƒì—ì„œëŠ” ë¬¸ì˜ íƒœê·¸ë„ `Interaction`ì´ì—ˆì§€ë§Œ, `Move Interaction`ìœ¼ë¡œ í•˜ì§€ ì•Šìœ¼ë‹ˆê¹Œ ì»¤ì„œ ì´ë¯¸ì§€ê°€ ë°”ë€Œì§€ ì•Šì•˜ë‹¤. ê·¸ë˜ì„œ ì–´ì©” ìˆ˜ ì—†ì´ `Move Interaction` íƒœê·¸ì™€ `isMovable` ë³€ìˆ˜ë¥¼ ëª¨ë‘ ì‚¬ìš©í•˜ê²Œ ë˜ì—ˆë‹¤.
- ì ì  ì˜ìƒê³¼ ì½”ë“œê°€ ë§ì´ ë‹¬ë¼ì§€ê³  ìˆëŠ”ë° ë‚´ê°€ ê°ë‹¹í•  ìˆ˜ ìˆì„ ê²ƒì¸ê°€... ìë™ ì´ë²¤íŠ¸ ì‚¬ì´ì‚¬ì´ UIê°€ ë…¸ì¶œë˜ëŠ” í˜„ìƒì€ ì•„ì§ë„ ì–´ë–»ê²Œ ê³ ì³ì•¼ í• ì§€ ì˜ ëª¨ë¥´ê² ë‹¤. ë‹¤ìŒì— ì´ê²ƒì €ê²ƒ ì‹œë„í•´ë´ì•¼ê² ë‹¤.